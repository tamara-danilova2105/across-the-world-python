# API Contract & Breaking Changes Policy

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º API —Å–µ—Ä–≤–∏—Å–∞:
- –∫–∞–∫ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç
- –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –µ–≥–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å
- –∫–∞–∫ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç—Å—è breaking changes

–ö–æ–Ω—Ç—Ä–∞–∫—Ç API —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –∫–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –Ω–∏–º.

---

## –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º

–ö–æ–Ω—Ç—Ä–∞–∫—Ç API ‚Äî —ç—Ç–æ –ø—É–±–ª–∏—á–Ω–æ–µ –æ–±–µ—â–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞ —Å–≤–æ–∏–º –∫–ª–∏–µ–Ω—Ç–∞–º. –û–Ω –æ–ø–∏—Å—ã–≤–∞–µ—Ç:
- —Å–ø–∏—Å–æ–∫ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- —Å—Ç—Ä—É–∫—Ç—É—Ä—É request / response
- –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏ –∏ –∏—Ö —Ñ–æ—Ä–º–∞—Ç
- —Å—Ç–∞—Ç—É—Å—ã HTTP-–æ—Ç–≤–µ—Ç–æ–≤

–ö–æ–Ω—Ç—Ä–∞–∫—Ç —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ —Ñ–∞–π–ª–µ:

```
openapi.json
```

–§–∞–π–ª –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ä—è–¥–æ–º —Å –∫–æ–¥–æ–º.

---

## –ì–µ–Ω–µ—Ä–∞—Ü–∏—è OpenAPI

–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç:

```
scripts/export_openapi.py
```

–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ (–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞):

```bash
python scripts/export_openapi.py
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã —Ñ–∞–π–ª `openapi.json` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è.

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

–ü–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º –∏/–∏–ª–∏ –ø—É—à–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º.

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞:

```bash
git diff --exit-code openapi.json
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

- ‚úÖ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –±–µ–∑ –≤—ã–≤–æ–¥–∞  
  –ö–æ–Ω—Ç—Ä–∞–∫—Ç –∞–∫—Ç—É–∞–ª–µ–Ω, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç—É

- ‚ùå –∫–æ–º–∞–Ω–¥–∞ –≤–µ—Ä–Ω—É–ª–∞ diff  
  API –±—ã–ª –∏–∑–º–µ–Ω—ë–Ω, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π `openapi.json`

---

## –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API

–ï—Å–ª–∏ –±—ã–ª–∏ –≤–Ω–µ—Å–µ–Ω—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤–ª–∏—è—é—â–∏–µ –Ω–∞ API (—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö, –æ—à–∏–±–∫–∏):

```bash
python scripts/export_openapi.py
git diff --exit-code openapi.json
git add openapi.json
git commit -m "chore: update OpenAPI contract"
```

–¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ `git push`.

---

## Breaking Changes Policy

### –ß—Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è breaking change

Breaking change ‚Äî —ç—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ API.

–ö breaking changes –æ—Ç–Ω–æ—Å—è—Ç—Å—è:
- —É–¥–∞–ª–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—è –∏–∑ response
- –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–æ–ª—è
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—è
- —Å—É–∂–µ–Ω–∏–µ enum (—É–¥–∞–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)

### –ß—Ç–æ –Ω–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è breaking change

- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ optional-–ø–æ–ª—è
- –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞
- —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ enum (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è)

‚ö†Ô∏è –î–∞–∂–µ non-breaking –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –≤–ª–∏—è—é—Ç –Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.

---

## –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ API

API –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ URL-–ø—Ä–µ—Ñ–∏–∫—Å:

```
/v1/...
```

–ü—Ä–∞–≤–∏–ª–∞:
- breaking changes ‚Üí –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è API (`/v2`)
- non-breaking changes ‚Üí –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –≤ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏

---

## –ö–æ–Ω—Ç—Ä–∞–∫—Ç –æ—à–∏–±–æ–∫

–í—Å–µ –æ—à–∏–±–∫–∏ API –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –µ–¥–∏–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ `ErrorResponse`.

–û–±—â–∏–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã:
- –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ HTTP-—Å—Ç–∞—Ç—É—Å—ã
- –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —É—Ç–µ—á–µ–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –¥–µ—Ç–∞–ª–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –æ—à–∏–±–æ–∫ —Ç–∞–∫–∂–µ –æ–ø–∏—Å–∞–Ω –≤ `openapi.json` –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é API-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞.

---

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

- `openapi.json` ‚Äî —Ç–µ–∫—É—â–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç API
- `API_CONTRACT.md` ‚Äî –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º

---

## üß≠ –¶–µ–ª—å –ø—Ä–æ—Ü–µ—Å—Å–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã:
- –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ breaking changes
- —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å API
- —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç–æ–≤
- –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—É—é —ç–≤–æ–ª—é—Ü–∏—é —Å–µ—Ä–≤–∏—Å–∞
